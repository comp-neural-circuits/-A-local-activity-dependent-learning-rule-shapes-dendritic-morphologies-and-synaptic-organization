Dendritic growth and synaptic organization from activity-independent cues and local activity-dependent plasticity
====================================================================

Matlab code for the manuscript ["Dendritic growth and synaptic organization from activity-independent cues and local activity-dependent plasticity"](https://doi.org/10.7554/eLife.87527.1) by Jan H. Kirchner, Lucas Euler, Ingo Fritz, Andr√© Ferreira Castro and Julijana Gjorgjieva

Contacts:
ingo.fritz@tum.de
gjorgjieva@tum.de

Getting Started
---------------

Download archive and extract into a folder on your system. When running the scripts, make sure the specified directories match your directory structure.

### Prerequisites

We wrote and executed the code with Matlab 2023a, but previous versions of Matlab should also be compatible.
The folders 'modules', 'helpers', 'data_Jan' and 'functions_for_analysis' contain data and functions that are needed for some of the scripts, but don't contain scripts that can be run on themselves. Thus it is advised to not change them. Adjusting the models configurations is possible in the main scripts that are specified below. 
All of the scripts that run simulations are optimized for parallel computing, using up to 32 cores. Also some of the analysis scripts in the "paper_figures" directory use parallel computing, this is specified below in more detail. So in case parallel computing is not possible on your local machine or cluster, then adjustments to those scripts are needed. You can see below which files are running the simulations of our model and which ones are for the analysis and generation of the figures.

### Reproducing the simulations

All the .m-files starting with 'run_and_extract_' are running simulations and will save them under the 'sims'-directory with a unique folder, named according to the date and time of the simulation.
For those scripts adjusting the number of cores used might need to be adjusted using the parpool() function, since the simulations can require a lot of RAM. If parallel computing is not possible, please replace the parfor loops with regular for loops and comment the parpool() function.

Scripts for simulations:
All of them start with 'run_and_extract_', and the endings specify for what they can be used. In case parameters want to be explored, they have to be adjusted accordingly. The default parameters are the ones used in the paper. All the scripts run 32 simulations of the model, which are then used for the analysis. There usually the results are averaged, since the activity in each simulation is randomly generated and therefore unique.
- 'baseline.m': Runs the baseline configuration of the model.
- 'baseline_long.m': Runs the baseline for double the simulation time.
- 'lessBDNF.m' and 'moreBDNF.m': Are the scenarios with altered BDNF concentration.
- 'somata[].m': Are the scenarios with a different number of neurons in the simulation (13, 16 and 25 respectively) .
- 'moving_loop.m': Runs all the configurations of moving synapses with several combinations of distances and lifetimes.
- 'activity_ingroup_loop.m': Runs all the configurations of within-group correlations used in the paper.
- 'activity_cross_loop.m': Runs all the configurations of across-group correlations used in the paper.
- 'activity_ingroup_n_cross_loop.m': Runs all the configurations of different combinations of within-group and across-group correlations used in the paper.

### Analysing the simulations

Once the simulations are generated they are stored in the 'sims'-folder. To analyse them you have to use the correct files in the 'paper_figures'-folder.
There you  have to follow the correct steps:
1) Use one of the .m-files ending with '_processing.m', which will preprocess the data so that it can be plotted easily. This is required, since the simulated files are rather big and reopening them would take some time. Here the correct '_processing.m'-file has to be used to get the same plots as in the paper. But in general the 'figure_5_processing.m'-file can be used for all the simulations, it might just miss some analysis compared to others.
2) After processing the data you can run the specific files needed to generate the figure (the file name should tell which figure can be generated by it). There you only have to adjust the directory to the simulation folders you want to plot and the figures will be saved in the 'Videos and images'-directory in a folder specified by the user.


License
-------

MIT License

Copyright (c) \[2024\] \[Jan H Kirchner and Ingo Fritz\]

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.  
